<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>French | Nistros</title>
    <script>
        // This script block handles the conditional loading of the main application script (iframes.js).
        // It must run before the DOMContentLoaded event if iframes.js contains logic that depends on elements being present at that point.
        (function() {
            const githubBasePath = '/Nistros/';
            const localBasePath = '/'; // For local development, root-relative paths work as is

            const isGitHubPages = window.location.hostname.endsWith('.github.io') || 
                                  window.location.hostname.includes('github.io');

            let scriptPath = '/back-end/iframes.js'; // Default path for local environment

            if (isGitHubPages) {
                // Adjust path for GitHub Pages. Remove leading '/' to avoid '//'
                scriptPath = githubBasePath + scriptPath.substring(1); 
                console.log(`Loading iframes.js from GitHub Pages path: ${scriptPath}`);
            } else {
                console.log(`Loading iframes.js from local path: ${scriptPath}`);
            }

            const script = document.createElement('script');
            script.src = scriptPath;
            script.onload = () => {
                console.log('iframes.js loaded successfully.');
                // If iframes.js has an initialization function, you could call it here.
                // For this example, assuming its content runs on DOMContentLoaded.
            };
            script.onerror = () => {
                console.error(`Failed to load iframes.js from: ${scriptPath}`);
            };
            document.head.appendChild(script); // Append to head or body
        })(); // Self-executing function to keep scope clean
    </script>
    <link rel="icon" href="/images/webp/favicon100x100.webp" type="image/jpeg" class="js-path-fixer">
    <link rel="stylesheet" href="/front-end/Style/style.css" class="js-path-fixer">
    <style>
        .tab-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }

        /* Swipeable container */
        .swipe-container {
            position: relative;
            height: 70vh; /* Adjust height as needed for your iframes */
            overflow: hidden;
            touch-action: pan-y; /* Allow vertical scrolling but handle horizontal ourselves */
            width: 100%;
        }

        .tab-content::before {
            content: 'Loading...';
            font-size: 40px;
            position: absolute;
            transform: translate(45%, 50%);
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8); /* Semi-transparent overlay */
            z-index: -10; /* Ensure it sits above the iframe but below the swipe overlay */
        }
        .tab-content {
            width: 100%;
            height: 100%;
            min-width: 0;
            opacity: 0;
            visibility: hidden;
            animation: fadeEffect 0.2s ease-in;
        }
        @keyframes fadeEffect {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .tab-content.active {
            opacity: 1;
            visibility: visible;
        }
        /* Ensure iframes fill their containers, delete?*/
        .tab-content iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
        /* Swipe Overlay */
        .swipe-overlay {
            position: absolute;
            bottom: 0px; /* Just above progress dots */
            left: 0;
            right: 0;
            height: 70px;
            background: transparent;
            z-index: 20;
            cursor: grab;
            user-select: none;
            touch-action: pan-x;
            outline: red solid 2px;
        }

        .swipe-overlay:active {
            cursor: grabbing;
            background: grey;
            opacity: 0.1;
        }
        


        /* Progress Indicator */
        .progress-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transition: background 0.3s ease;
        }

        .progress-dot.active {
            background: white;
        }
   
    </style>
</head>
<body>
    <header>
        <div class="home-icon-container">
            <a href="/index.html" class="home-link js-path-fixer">
                <img src="/images/webp/favicon100x100.webp" alt="Home_Icon" class="home-icon js-path-fixer">
            </a>
        </div>
        <div class="header-title-container">
            <h1 class="title">Search French words</h1>
        </div>
        <div class="more-resources-button-container collapsible-menu-trigger">
            <a href="#" class="more-resources-link js-path-fixer">
                <img src="/images/webp/external-link-icon-150x150.webp" alt="More resources button" class="more-resources-icon js-path-fixer">
                <span>More</span>
            </a>
        </div>
        <div class="settings-button-container collapsible-menu-trigger">
            <a href="#" class="settings-link js-path-fixer">
                <img src="/images/webp/settings-icon-98x100.webp" alt="Settings button" class="settings-icon js-path-fixer">
                <span>Settings</span>
            </a>
        </div>
    </header>
    <main>
        <section class="search-container">
            <div class="search-input-container">
                <span class="search-icon">üîç</span>
                <input type="text" id="search-input" class="search-field" placeholder="Enter a word">
                <button id="clear-button" class="clear-button" aria-label="Clear input">‚úï</button>
                <button id="search-button" class="update-button">Search</button>
            </div>
        </section>
        <!-- Tab Layout -->
        <section class="tab-container" id="tab-layout">
            <div class="tab-header">
                <button class="tab-button active" data-tab="0">üìö EN Wiktionary</button>
                <button class="tab-button" data-tab="1">üìñ FR Wiktionary</button>
                <button class="tab-button" data-tab="2">üî§ Dict.com</button>
                <button class="tab-button" data-tab="3">üå± Etymonline</button>
                <button class="tab-button" data-tab="4">üåê FR Wikipedia</button>
                <button class="tab-button" data-tab="5">Conjugation</button>
            </div>

            <div class="swipe-container">
                <div class="tab-content active" data-tab="0">
                    <iframe class="dynamic-iframe" data-target-site="en-wiktionary" src="https://en.wiktionary.org/wiki" title="English Wiktionary"></iframe>
                </div>
                <div class="tab-content" data-tab="1">
                    <iframe class="dynamic-iframe" data-target-site="fr-wiktionary" src="https://fr.wiktionary.org/wiki" title="French Wiktionary"></iframe>
                </div>
                <div class="tab-content" data-tab="2">                     
                    <iframe class="dynamic-iframe" data-target-site="dict-fr-ua" src="https://dict.com/%D1%84%D1%80%D0%B0%D0%BD%D1%86%D1%83%D0%B7%D1%8C%D0%BA%D0%BE-%D1%83%D0%BA%D1%80%D0%B0%D1%96%D0%BD%D1%81%D1%8C%D0%BA%D0%B8%D0%B8" title="Dict.com"></iframe>
                </div>
                <div class="tab-content" data-tab="3">                      
                    <iframe class="dynamic-iframe" data-target-site="etymonline" src="https://www.etymonline.com" title="Etymology Online"></iframe>
                </div>
                <div class="tab-content" data-tab="4">
                    <iframe class="dynamic-iframe" data-target-site="fr-wikipedia" src="https://fr.wikipedia.org/wiki" title="French Wikipedia"></iframe>
                </div>
                <div class="tab-content" data-tab="5">
                    <iframe class="dynamic-iframe" data-target-site="conjugation-fr" src="https://www.conjugation-fr.com/index.html" title="Conjugation"></iframe>
                </div>
                <div class="swipe-overlay" id="swipe-overlay">
                </div>
                <!-- Progress Indicator -->
                <div class="progress-indicator">
                    <div class="progress-dot active"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                    <div class="progress-dot"></div>
                </div>
            </div>
            
            
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Nistros Free Access</p>
    </footer>
    <script src="/Nistros/back-end/path-fixer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
   
    <script>
        class SwipeableTabs {
            constructor() {
                this.currentIndex = 0;
                this.totalTabs = 6;
                this.isInteracting = false;
                this.startX = 0;
                this.threshold = 50; // Minimum swipe distance
                
                this.tabButtons = document.querySelectorAll('.tab-button');
                this.tabContents = document.querySelectorAll('.tab-content');
                this.progressDots = document.querySelectorAll('.progress-dot');
                this.swipeOverlay = document.getElementById('swipe-overlay');
                
                this.init();
            }
            
            init() {
                this.bindEvents();
                this.updateActiveStates();
            }
            
            bindEvents() {
                // Swipe overlay events
                this.swipeOverlay.addEventListener('mousedown', this.handleStart.bind(this));
                this.swipeOverlay.addEventListener('touchstart', this.handleStart.bind(this), { passive: false });
                
                // Global move and end events
                document.addEventListener('mousemove', this.handleMove.bind(this));
                document.addEventListener('mouseup', this.handleEnd.bind(this));
                document.addEventListener('touchmove', this.handleMove.bind(this), { passive: false });
                document.addEventListener('touchend', this.handleEnd.bind(this));
                
                // Tab button events
                this.tabButtons.forEach((button, index) => {
                    button.addEventListener('click', () => {
                        this.switchTab(index);
                    });
                });
                
                // Prevent context menu
                this.swipeOverlay.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                });
            }
            
            handleStart(e) {
                this.isInteracting = true;
                this.startX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
                
                if (e.type === 'touchstart') {
                    e.preventDefault();
                }
            }
            
            handleMove(e) {
                if (!this.isInteracting) return;
                
                const currentX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
                const deltaX = currentX - this.startX;
                
                // Visual feedback during swipe
                if (Math.abs(deltaX) > 10) {
                    this.swipeOverlay.style.transform = `translateX(${deltaX * 0.1}px)`;
                }
                
                if (e.type === 'touchmove') {
                    e.preventDefault();
                }
            }
            
            handleEnd(e) {
                if (!this.isInteracting) return;
                
                this.isInteracting = false;
                this.swipeOverlay.style.transform = '';
                
                const endX = e.type === 'mouseup' ? e.clientX : e.changedTouches[0].clientX;
                const deltaX = endX - this.startX;
                
                if (Math.abs(deltaX) > this.threshold) {
                    if (deltaX > 0 && this.currentIndex > 0) {
                        // Swipe right - go to previous tab
                        this.switchTab(this.currentIndex - 1);
                    } else if (deltaX < 0 && this.currentIndex < this.totalTabs - 1) {
                        // Swipe left - go to next tab
                        this.switchTab(this.currentIndex + 1);
                    }
                }
            }
            
            switchTab(index) {
                if (index < 0 || index >= this.totalTabs || index === this.currentIndex) {
                    return;
                }
                
                this.currentIndex = index;
                this.updateActiveStates();
            }
            
            updateActiveStates() {
                // Update tab buttons
                this.tabButtons.forEach((button, index) => {
                    button.classList.toggle('active', index === this.currentIndex);
                });
                
                // Update tab contents
                this.tabContents.forEach((content, index) => {
                    content.classList.toggle('active', index === this.currentIndex);
                });
                
                // Update progress dots
                this.progressDots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === this.currentIndex);
                });
            }
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new SwipeableTabs();
        });
    </script>
</body>
</html>